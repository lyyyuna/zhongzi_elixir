package main

import (
	"log"
	"os"

	"github.com/gin-gonic/gin"
	"github.com/joho/godotenv"
	"github.com/lyyyuna/zhongzi_go/internal/config"
	"github.com/lyyyuna/zhongzi_go/internal/database"
	"github.com/lyyyuna/zhongzi_go/internal/handlers"
	"github.com/lyyyuna/zhongzi_go/internal/logger"
	"github.com/lyyyuna/zhongzi_go/internal/middleware"
)

func main() {
	// Load environment variables
	if err := godotenv.Load(); err != nil {
		log.Println("Warning: .env file not found")
	}

	// Initialize configuration
	cfg := config.Load()

	// Initialize logger
	logger.Init(cfg.LogLevel)

	// Initialize database
	db, err := database.Init(cfg)
	if err != nil {
		log.Fatal("Failed to initialize database:", err)
	}

	// Set Gin mode
	gin.SetMode(cfg.GinMode)

	// Initialize router
	router := gin.New()

	// Add middleware
	router.Use(middleware.Logger())
	router.Use(middleware.Recovery())
	router.Use(middleware.CORS())

	// Initialize handlers
	h := handlers.New(db)

	// Setup routes
	setupRoutes(router, h)

	// Start server
	port := os.Getenv("PORT")
	if port == "" {
		port = "8080"
	}

	logger.Info("Server starting on port " + port)
	if err := router.Run(":" + port); err != nil {
		log.Fatal("Failed to start server:", err)
	}
}

func setupRoutes(router *gin.Engine, h *handlers.Handler) {
	api := router.Group("/api/v1")
	{
		api.GET("/health", h.Health)
		api.GET("/users", h.GetUsers)
		api.POST("/users", h.CreateUser)
		api.GET("/users/:id", h.GetUser)
		api.PUT("/users/:id", h.UpdateUser)
		api.DELETE("/users/:id", h.DeleteUser)
	}

	// Serve static files and handle SPA routing
	router.Static("/static", "./web/static")
	router.LoadHTMLGlob("web/templates/*")
	router.GET("/", h.Index)
}